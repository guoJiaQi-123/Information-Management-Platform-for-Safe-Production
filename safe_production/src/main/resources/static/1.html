<html xmlns="http://www.w3.org/1999/xhtml">
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html" ; charset="utf-8"/>
    <title>气体检测管理平台</title>

    <link href="css/style02.css" rel="stylesheet" type="text/css">
    <link href="js/bstable/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="js/bstable/css/bootstrap-table.css" rel="stylesheet" type="text/css">
    <link href="js/scroll/css/liMarquee.css" rel="stylesheet" type="text/css">
    <script src="js/jquery.js"></script>
    <script src="js/layer_v2.1/layer/layer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.1/dist/echarts.min.js"></script>
    <script src="js/bstable/js/bootstrap.min.js"></script>
    <script src="js/bstable/js/bootstrap-table.js"></script>
    <script src="js/bstable/js/bootstrap-table-zh-CN.min.js"></script>
    <script src="js/home_table.js"></script>
    <script src="js/home_chart.js"></script>
    <script type="text/javascript" src="js/scroll/js/jquery.liMarquee.js"></script>
</head>
<style>
    .warn-div {
        width: 237px;
        height: 135px;
        background-color: lightblue;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        display: none;
    }

    .layui-layer-title {
        background: blue;
        color: #FFFFff;
    }
</style>
<body onload="change1(),change()" style="overflow-x: hidden">
<div class="warn-div" id="warn">
    <img src="warning.gif">
</div>


<div class="div_home">

    <div class="home_title">

    </div>
    <div class="clear"></div>

    <div class="left_top" style="margin-top: -4%">设备数据实时显示</div>
    <div class="right_top" style="margin-top: -4%">设备数据实时监控<span id="devName"></span></div>
    <div class="clear"></div>
    <div class="left_con1">
        <div class="con_p1">
            <div class="p_a">
                <span class="p_a01">总设<p>备数</p></span><span class="p_a02" id="p01">0</span>
            </div>
            <div class="p_a">
                <span class="p_a01">在线<p>设备</p></span><span class="p_a03" id="p02">0</span>
            </div>
        </div>
        <div class="con_p1">
            <div class="p_a">
                <span class="p_a01">离线<p>设备</p></span><span class="p_a02" id="p03">0</span>
            </div>
            <div class="p_a">
                <span class="p_a01">报警<p>设备</p></span><span class="p_a03" id="p04">0</span>
            </div>
        </div>
    </div>
    <div class="right_con1">
        <div id="con1" style="width: 100%;height: 100%;margin-left: 2%;margin-top: 2%;overflow: hidden">
            <div id="con1_1" style="width: 505px;height:190px"></div>
        </div>
    </div>
    <div class="clear"></div>
    <div class="left_top">设备状态分析</div>
    <div class="right_top">气体实时监测</div>
    <div class="clear"></div>
    <div class="left_con2">
        <h5 class="h_style"><i class="i_h"></i><span>案件xxx量</span></h5>

        <div id="left02" style="width: 100%;height: 85%;padding: 0;margin-top: 0%;margin-left: 2%"></div>
    </div>
    <div class="right_con2">
        <div id="con2" style="width: 98%;height: 98%;margin: 0;padding: 5%"></div>
    </div>
    <div class="clear"></div>
    <div class="left_top">实时报警信息</div>
    <div class="right_top" style="margin-top: -1.5%">移动端信息上报</div>
    <div class="clear"></div>
    <div class="left_con3">
        <div class="ul_top"><span>名称1</span><span>端口</span><span>是否在线</span><span>时间</span></div>
        <div style="width: 96%;height: 96%;background: transparent;margin-top: 2%" id="div01">
            <ul class="ul_con" id="myList">
                <li><a href="javascript:void(0)">
                    <span style="color: red"></span>
                    <span></span>
                    <span></span>
                    <span></span></a>
                </li>
            </ul>
        </div>
    </div>
    <div class="right_con3" style="margin-top: -2%" id="r03">
        <div class="ul_top"><span>等级</span><span>名称</span><span>案情</span><span>时间</span></div>
        <div style="width: 96%;height: 96%;background: transparent;margin-top: 2%" id="div02">
            <ul class="ul_con">
                <li><a href="javascript:void(0)"><span
                        style="color: red">严重</span><span>xxx道路</span><span>拥堵</span><span>1/13:00</span></a></li>
            </ul>
        </div>
    </div>
    <div class="clear"></div>

    <div class="div_bottom">
        <div class="bot_left"><a href="#" onclick="add()" class="title_but">视频监控 </a><a href="#" class="title_but"
                                                                                            onclick="addFind()">信息查询 </a>
        </div>
        <ul>
            <li><a href="javascript:void(0)"><img src="img/defaut.png"/> </a></li>
            <li><a href="javascript:void(0)"><img src="img/max.png"/> </a></li>
            <li><a href="javascript:void(0)"><img src="img/min.png"/> </a></li>
            <li><a href="javascript:void(0)"><img src="img/cheliangbukong.png"/> </a></li>
            <li><a href="javascript:void(0)"><img src="img/renyuanbukong.png"/> </a></li>
            <li><a href="javascript:void(0)"><img src="img/jinyuan.png"/> </a></li>
            <li><a href="javascript:void(0)"><img src="img/jiankong.png"/> </a></li>
            <li><a href="javascript:void(0)"><img src="img/weizhang.png"/> </a></li>
            <li><a href="javascript:void(0)"><img src="img/alam01.png"/> </a></li>
        </ul>
        <span class="bottom_right"><a href="#" class="title_but" onclick="addAy()">综合分析</a><a href="#"
                                                                                                  class="title_but"
                                                                                                  onclick="sumitT()">问题反馈</a> </span>
    </div>

</div>
<script>

    function change1() {

        var w01 = $(window).width();
        $(".home_title1").css('width', w01 - 600 + "px");
    }

    function change() {
        var th01 = $(window).height();
        $(".div_right").css('height', th01 - 24 + "px");

    }
</script>
<script>
    $(function () {
        $('#div01').liMarquee({
            direction: 'down',
            scrollamount: 30
        });
    });
</script>
<script>
    $(function () {
        $('#div02').liMarquee({
            direction: 'down',
            scrollamount: 30
        });
    });
</script>
<script>

    $.ajax({
        url: "/device/indexData",//接口地址
        type: "GET",//请求类型，可以是GET、POST、PUT、DELETE等
        dataType: "json",//期望服务器返回的数据类型，常见的有json、text、html等
        success: function (data) {
            // 请求成功后的回调函数，data是服务器返回的数据
            console.log(data.result.total);
            $(document).ready(function () {
                $("#p01").text(data.result.total); // 100
                $("#p02").text(data.result.online); //0
                $("#p03").text(data.result.offline);//110
                $("#p04").text(data.result.alarmDevices);//110
            });
        },
        error: function (xhr, status, error) {
            // 请求失败后的回调函数，xhr是XMLHttpRequest对象，status是状态码，error是错误信息
            console.log("请求出错：", status, error);
        }
    });

    $.ajax({
        url: "/device/search",//接口地址
        type: "GET",//请求类型，可以是GET、POST、PUT、DELETE等
        dataType: "json",//期望服务器返回的数据类型，常见的有json、text、html等
        success: function (data) {
            // 请求成功后的回调函数，data是服务器返回的数据
            console.log("121312312", data);
            // 选择要插入列表的元素
            const listContainer = $("#myList");
            // 遍历从服务器获取的数据
            $.each(data, function (index, value) {
                // 创建一个新的列表项元素
                const listItem1 = $("<li style='color: white' href='javascript:void(0)'><span id='sp1'></span><span id='sp1'></span><span id='sp1'></span id='sp1'><span></span></li>");
                // 将列表项添加到列表容器中
                $("#sp1").text(value.name); // 100
                $("#sp2").text(value.devPort); //0
                $("#sp3").text(value.flag);//110
                $("#sp4").text(value.createTime);//110
                listContainer.append(listItem1);
            });
        },
        error: function (xhr, status, error) {
            // 请求失败后的回调函数，xhr是XMLHttpRequest对象，status是状态码，error是错误信息
            console.log("请求出错：", status, error);
        }
    });


    function add() {
        layer.open({
            type: 2,
            skin: 'demo-class',
            title: '设备管理',
            fix: true,
            shadeClose: true,
            area: ['1400px', '700px'],
            content: 'carContrl.html',

        });
    }

    function addFind() {
        layer.open({
            type: 2,
            skin: 'demo-class',
            title: '信息查询',
            fix: true,
            shadeClose: true,
            area: ['1400px', '700px'],
            content: 'car.html',

        });
    }

    function addAy() {
        layer.open({
            type: 2,
            title: '综合分析',
            shadeClose: true,
            shade: 0.5,
            skin: 'layui-layer-rim',
            closeBtn: 1,
            area: ['80%', '700px'],
            content: 'correctSpecial_analysis.html'
        });
    }

    function sumitT() {
        layer.open({
            type: 2,
            title: '信息反馈',
            shadeClose: true,
            shade: 0.5,
            skin: 'layui-layer-rim',
            closeBtn: 1,
            area: ['80%', '700px'],
            content: 'validate.html'
        });
    }
</script>
</body>
</html>
